<html><head></head><body>
<div id="widget"></div>
<ul id="balances">(calculating...)</ul>
(see source code for details)
<script src="http://remotestoragejs.com/build/0.7.0-dp1/remoteStorage-debug.js"></script>
<script src="http://remotestoragejs.com/build/0.7.0-dp1/money.js"></script>
<script>
  function declaration(person, date, comment, euros) {
    remoteStorage.money.addDeclaration(person, 'donations-needed', comment, date, euros, 'EUR');
  }
  function bulkDeclaration(person, date, items) {
    for(var i in items) {
      declaration(person, date, i, items[i]);
    }
  }
  function transfer(from, to, date, euros) {
    remoteStorage.money.reportTransfer(from, to, date, euros, 'EUR');
  }
  function reportDonation(comment, euros, acceptor, date) {
    remoteStorage.money.reportTransfer('donations-received', acceptor, date, euros, 'EUR');
    //remoteStorage.money.addIOU('donation '+date, comment, euros, 'EUR', 'unhosted-project', 'donations-needed');
  }

  localStorage.clear();
  remoteStorage.loadModule('money', 'rw');//first load all modules you need,
  remoteStorage.displayWidget('widget');//after that, display the widget
  bulkDeclaration('michiel', '2011/09/09', {
    'full-time work allowance Michiel, 1 Nov 2010 - 15 Jan 2011':       2500.00,
    'full-time work allowance Michiel, 1 Mar 2011 - 8 Sep 2011':        6250.00,
    'office desk Michiel     co-up, april, 12-day flex':                  95.00,
    'office desk Michiel     betahaus, july, at team desk + coffee':     158.33
  });
  reportDonation('Donation by Michiel', 6000, 'michiel', '2011/09/09');
  reportDonation('Received from Crisp for workshop', 540, 'michiel', '2011/09/09');
  reportDonation('Donations accepted in cash by Michiel', 40, 'michiel', '2011/09/09');
  
  bulkDeclaration('javi', '2011/09/09', {
    'office desk Javier      co-up, april, 12-day flex':                  95.00,
    'full-time work allowance Javier, 15 Mar 2011 - 31 May 2011':       2500.00,
    'reserved for Krankenkasse Javier, 15 Mar 2011 - 31 May 2011':      375.00
  });
  reportDonation('Donation by Javier', 2970, 'javi', '2011/09/09');
  
  bulkDeclaration('michiel', '2011/09/09', {
    'DNR+Host \'unhosted.org\' godaddy            (11 sep)': 12.08,
    'DNR                     godaddy            (16 jan)': 7.70,
    'DNR                     godaddy            (20 jan)': 4.45,
    'DNR                     godaddy            (26 jan)': 7.76,
    'DNR                     godaddy            2 mar': 7.45,
    'DNR                     godaddy            24 mar 1': 8.67,
    'DNR                     godaddy            24 mar 2': 7.24,
    'DNR                     godaddy            26 mar': 10.86,
    'DNR                     godaddy            28 mar': 0.07,
    'DNR                     godaddy            (8 may)': 7.10,
    'DNR                     godaddy            (24 may)': 7.30,
    'DNR                     godaddy            (20 jul)': 29.76,
    'DNR                     godaddy            (28 aug)': 19.27,
    'DNR                     godaddy            (2 sep)': 1.55
  });
  bulkDeclaration('michiel', '2011/09/09', {
    'arsys             56.64         (15 dec)': 56.64,
    'godaddy            4.50         (20 dec)': 4.50,
    'arsys             17.70         (10 jan)': 17.70,
    'arsys             35.40         (11 feb)': 35.40,
    'rackspace          9.22         (1 may)': 9.22,
    'rackspace         14.45         (3 may)': 14.45,
    'rackspace         18.79         (3 jun)': 18.79,
    'rackspace         15.68         (8 jul)': 15.68,
    'rackspace         39.34         (3 aug)': 39.34,
    'rackspace         22.92         (3 sep)': 22.92,
    'hostgator          5.09         (3 sep)': 5.09
  });
  bulkDeclaration('michiel', '2011/09/09', {
    'advertising             google adwords    43.12         (4 dec)': 43.12,
    'advertising             google adwords    18.94         (4 jan)': 18.94,
    'advertising             google adwords     7.85         (2 feb)': 7.85,
    'advertising             google             7.84         3 mar': 7.84,
    'advertising             google             0.08         4 apr': 0.08
  });
  bulkDeclaration('michiel', '2011/09/09', {
    'T-shirts':                                 586.99,
    'sdw Screen-printing workshop':             155.00,
    '50 big envelopes':                           9.00 
  });
  bulkDeclaration('michiel', '2011/09/09', {
    'H.H. plugserver 1       globalscale':      84.74,
    'H.H. plugserver 2       globalscale':       82.07,
    'H.H. plugserver 3       codelathe llc':     82.00
  });
  bulkDeclaration('michiel', '2011/09/09', {
    'travel madrid-donosti   alsa                   67.62         28 jan': 67.62,
    'bus Stockholm airport   flygbussarna           25.00         (mar)': 25,
    'travel bxl-Lille-bxl    B. Rail                48.00           apr': 48,
    'bus Stockholm airport   flygbussarna           24.67         (16 may)': 24.67,
    'travel visit Jan in Stuttgart: 30+30+7.50+4.10': 71.60,
    'travel first visit nlnet:2x5.80':                10.60,
    'travel second visit nlnet: 8+10.80+2.40+1.40':   22.60,
    'travel rmll: 152.30+15car +140gas -205mitfahr': 102.30
  });
  bulkDeclaration('michiel', '2011/09/09', {
    'wifi Rostock            T-mobile':               19.95,
    'wifi stockholm          the cloud':               4.49,
    'hotel lille             Premier Class':          40.00,
    'campsite RMLL':                                  20.00
  });
  bulkDeclaration('michiel', '2011/09/09', {
    'ccc camp':                                      140.00,
    'registration fee        FSW2011                17.23        (7 may)': 17.23,
    'okcon                      ':                    30.00,
  });
  bulkDeclaration('berlinerbank', '2011/09/09', {
    'reject.js                                            (13 eur, will be paid through berliner bank)': 13,
    'jsconfeu-fun                                         (20 eur, will be paid through berliner bank)': 20,
  });
  reportDonation('paid directly from Berliner Bank account', 33, 'berlinerbank', '2011/09/09');
  
  bulkDeclaration('michiel', '2011/09/09', {
    'notary                  Seeger&Seeger          31.75         (apr)': 31.75,
    'e.V. registry                                  53.00         (4 jul)': 53,
    'setup fee               paypal                  1.50         (29 apr)': 1.5,
    'setup fee               flattr                  8.00         (3 may)': 8,
    'setup fee               Google dev              3.56         (13 may)': 3.56
  });

  //START YEAR TWO:

  bulkDeclaration('michiel', '2011/10/31', {
    '42 Unhost postcards to send with T-shirts (via Kenny): 42 * 20 CZK = 840 CZK': 35,
    'stamps for sending 27 T-shirt packages from Unhost: 1950 CZK': 80,
    'sending another 14 T-shirts: 2x Germany(1.45 EUR), 12x international(3.45 EUR)': 44.30,
    'days co-up Michiel sept: 95 eur, paid directly from Berliner Bank': 0,
    //'the verein already owed him 4613.82 euros for year one expenses, plus whatever he paid for Krankenkasse during the period': 4613.82,
    'paid 4,50 for sdw prints': 4.50,
    'paid sdw (some 130 euros, will check)': 130,
    'paid 40,15 for sending T-shirts (3rd batch)': 40.15,
    'paid 185,75 in train tickets, of which 89,25 will be paid back through Jan, and 38,50 is a donation from Michiel to DS11': 89.25,
    '5-9-2011 28-9-2011 (Liquidado) Pago en GODADDY.COM EUROPE 02079792661': 19.73,
    '5-9-2011 28-9-2011 (Liquidado) Pago en GODADDY.COM EUROPE 02079792661': 12.43,
    '9-9-2011 28-9-2011 (Liquidado) Pago en T-MOBILE CZECH REPUBLIK BONN': 24.59,
    '03/10/2011 THE RACKSPACE CLOUD (210-581-0410 - Estados Unidos)': 20.28,
    '20/10/2011 GODADDY.COM EUROPE (02079792661 - Reino Unido)': 7.50,
    'flyeralarm stickers pay-on-delivery': 68.71,
    'worked two months 9 sept - 9 nov': 2000
  });
  reportDonation('received 4042 euros from paypal to his personal bank account (comdirect)', 4042, 'michiel', '2011/10/31');
  reportDonation('received from nlnet', 2800, 'michiel', '2011/10/31');
  
  transfer('donations-needed', 'unhosted-reserved', '2012/09/09', 937, 'EUR', 'reservation for Krankenkasse Michiel, 1 Mar 2011 - 8 Sep 2011');
  transfer('unhosted-reserved', 'donations-needed', '2012/10/09', 937, 'EUR', 'reservation for Krankenkasse Michiel, 1 Mar 2011 - 8 Sep 2011');
  
  bulkDeclaration('michiel', '2011/12/31', {
    //'original summary (presumably the 1 Nov start balance?)': 3125.20,
    'mozfest (apart from travel to UK which was already in there)': 32.76,
    'visit to surfnet was 12+9+2 = 21 eur by train': 21,
    'train to govcert: 5,50 eur (they are not paying in the end)': 5.50,
    'train govcert -> bearstech': 47.50,
    'rackspace 2 nov -> 20,69 eur -> 127.45': 20.69,
    'and also since then: rackspace 2 dec': 23.91,
    'unemployment 9 nov - 9 jan': 2000
  });
  reportDonation('received from nlnet', 2500, 'michiel', '2011/12/31');
  bulkDeclaration('michiel', '2011/02/29', {
    //'was owed': 2476.56,
    'received from govcert': -81.61,
    'living costs 9 Jan .. 9 Mar': 2000,
    'zekur health insurance (10-11-2011..29-02-2012)': 265.15,
    'rackspace 3/1': 19.12,
    'hostal fosdem': 58.50,
    'tram in brussels': 2+2+3.50,
    'train brussels -> NL': 35.70,
    'train+bus -> Terena': 2+8,
    'train-> deventer': 15.80,
    'train deventer -> den haag': 15.20+2.00
  });
  reportDonation('received from nlnet', 2000, 'michiel', '2011/03/03');
  bulkDeclaration('michiel', '2011/04/30', {
    'received from paypal 740 euros (17 Feb)': -740,
    'received from paypal: 690 euros (8 March)': -690,
    '03/02/2012  THE RACKSPACE CLOUD (210-581-0410 - Estados Unidos)':     11.07,
    '29/02/2012  Pendiente de liquidar   Pago en GODADDY.COM EUROPE 02079792661':  11.44,
    '03/03/2012  Pendiente de liquidar   Pago en THE RACKSPACE CLOUD 210-581-0410':    11.63,
    '12/03/2012  Pendiente de liquidar   Pago en VUELING AIRLINES EL PRAT DE LL  79,49€ (book against 500 from nlnet)': 79.49,
    '03/04/2012  Pendiente de liquidar   Pago en THE RACKSPACE CLOUD 210-581-0410':    17.64,
    '12-4-2012   Pendiente de liquidar   Pago en DB BAHN A-NR RFEHTO INTERNET': 81,
    '12-4-2012   Pendiente de liquidar   Pago en HOSTELBOOKERS.COM 0207 4061800': 4.62,
    '27.04.2012 Berliner Bank booked Unhosted e.V. banking costs against my comdirect account': 9.42,
    '27/04/2012 paid flight to Reykjavik': 526.08,
    'S-bahn tickets Hamburg: 7x1.85': 12.95,
    '28.04.2012 paid co-up 28 april .. 27 may':95,
    'living expenses 9 Mar - 9 May': 2000
  });
  reportDonation('received from nlnet', 2000, 'michiel', '2011/05/08');
  bulkDeclaration('michiel', '2012/06/30', {
    'received 100 cash from Jan': -100,
    '15/05/2012 received 500 from nlnet for commit talk': -500,
    '05/05/2012 rackspace':  27.78,
    '08/05/2012 international health insurance':  4.10,
    '20/05/2012 bus airport-Reykjavik': 12.15,
    '24/05/2012 bus Reykjavik-airport': 12.19,
    '25/05/2012 zekur health insurance': 73.50,
    'travel CouchHack': 224.22+19,
    '05/06/2012 international health insurance':  4.10,
    '07.06.2012 paid co-up 5 june .. 4 july':95,
    '12.06.2012 received from TheDocumentFoundation': -36.75,
    '13/06/2012 rackspace':  31.63,
    '14/06/2012 received from surfnet': -526.08,
    '29/06/2012 zekur health insurance': 73.50,
    'living expenses 9 May - 9 July': 2000
  });
  reportDonation('payment from nlnet', 2300, 'michiel', '2011/07/25');
  bulkDeclaration('michiel', '2012/08/31', {
    'Finanzamt Unhosted e.V. costs': 112.60,
    '2012/08/28 ARAG': 42.15,
    'living expenses 9 July - 9 Sept': 2000,
    '2012/07/08 Unive': 4.10,
    '2012/07/27 zekur': 73.50,
    '03/07/2012   THE RACKSPACE CLOUD (210-581-0410 - Estados Unidos De América)': 32.95,
    '07/07/2012 (Berlin-Hamburg)  DB BAHN A-NR G6XX3V (Internet - Alemania)':  77.25,
    '23/07/2012   GODADDY.COM EUROPE (02079792661 - Reino Unido)': 11.14,
    '02/08/2012   THE RACKSPACE CLOUD (210-581-0410 - Estados Unidos De América)': 26.52,
    '12/08/2012   GODADDY.COM EUROPE (02079792661 - Reino Unido)': 7.55,
    '17/08/2012   GODADDY.COM EUROPE (02079792661 - Reino Unido)': 5.90

  });

  // START JAN
  bulkDeclaration('jan', '2011/10/31', {
    //2000 + 151.73 stickers + 6.85 copyshop = 2158.58 (received 2200, owing 41.42)
    'worked two months': 2000,
    'days co-up: 14,15 sept, 3 single tickets (paid through Berliner Bank)': 0,
    '22.62 for jsconfEU party (paid through Berliner Bank)': 0,
    'stickers': 151.73,
    '188 € train: 169 to webtechcon + 19 back (paid by them)': 0,
    'of webtechcon money, 89.25 was for Michiel\'s travel costs': -89.25,
    '6,85 copyshop for 24 Unhost postcards': 6.85
  });
  reportDonation('received from nlnet', 2200, 'jan', '2011/10/31');
  bulkDeclaration('jan', '2011/12/31', {
    //: 2000 + 61.09 (7.85+7.40+6.30+4.54+35) = 2061.09 (received 2500, owed 41.42 last) owing 480.33
    'stamps for 3 more shirts (November 10)': 7.85,
    '(1.80+2.80+2.80) in local tickets to get to HamburgJS, to friend and back (~90 in DB tickets paid by HamburgJS, November 21)': 7.40,
    'day pass to get to Köpenick youth meeting (Facebook presentation, 100 € payment will be donated to Unhosted e. V., November 22)': 6.30,
    'received donation for unhosted from Koepenick': -100,
    'packages and stamps for sending more shirts (December 5)': 4.54,
    '28C3 day pass to give a lightning talk (December 30)': 35,
    'worked two months': 2000
  });
  reportDonation('received from nlnet', 2500, 'jan', '2012/02/29');
  bulkDeclaration('jan', '2012/02/29', {
    'health insurance, 215.26*4 for September–December, 221.15 after 2012 raise for January (February 15)': 1082.19,
    'health insurance abroad': 11,
    'liability insurance': 69.59,
    'worked two months': 2000
  });
  reportDonation('received from nlnet', 3000, 'jan', '2012/02/29');
  bulkDeclaration('jan', '2012/04/30', {
    'sending two shirts (March 7)': 4.90,
    'bus tickets (5.00+2.70) getting into Amsterdam (hitchhiked there, March 7)': 7.70,
    '7.95 printing Unhosted readers for Unlike Us conf attendees (March 9)': 7.95,
    '8.10 (3*2.70) getting to the Unlike Us conf venue (March 9–10)': 8.10,
    '79 €: Unlike Us Amsterdam train back (March 11)': 79,
    '149 10-day flex ticket Coworking0711 (March 15)': 149,
    '221.15 health insurance for February (March 15)': 221.15,
    '3.45 sending another shirt (March 17)': 3.45,
    '54.61 for 1000 new stickers from Flyeralarm (March 22)': 54.61,
    '35.52 for 2500 JS stickers (March 22)': 35.52,
    '4.60 train for Binärgewitter podcast (2.30*2);': 4.60,
    '144.14 for remoteStorage stickers from Stickermule (for next time maybe try German 47print or Stickerlove)': 144.14,
    '221.15 health insurance for March (April 16)': 221.15,
    'worked two months': 2000
  });
  reportDonation('received from nlnet', 3000, 'jan', '2012/06/15');
  bulkDeclaration('jan', '2012/06/30', {
    'gave 100 cash to Michiel': 100,
    'health insurance for April (May 15)': 221.15,
    'health insurance for May (June 15)': 221.15,
    '20 for 3 days co.up coworking space (June 5–7)': 20,
    '27.28 customs + 4.10 (2*2.05) train ride (for remoteStorage stickers, May 31)': 27.28,
    '52.97 for 1000 new Unhosted stickers': 52.97,
    '28.70 (14.35 * 2) yearly for unhost.it (year from 16.07.2011 & 16.07.2012)': 28.70,
    '14.35 docrastinate.com (year from 28.04.2012)': 14.35,
    '14.35 sharedstuff.org (year from 28.05.2012)': 14.35,
    '14.35 focalendar.com (year from 01.05.2012)': 14.35,
    '14.35 litewrite.net (year from 21.05.2012)': 14.35,
    '2.97 (0.90+0.18+0.63+1.26) for calls to the tax office (June 6 & 7)': 2.97,
    'worked two months': 2000,
    'predicted declaration plane ticket Portland': 280,
    'predicted payment 15 July: krankenkasse May': 221.15
  });
  reportDonation('final payment from nlnet', 2700, 'jan', '2012/07/25');
  declaration('hugo', '2012/06/30', 'internship June', 500);
  declaration('hugo', '2012/06/04', 'co-up basic', 20);
  declaration('hugo', '2012/07/04', 'co-up basic + 2 days', 20+2*12);
  declaration('hugo', '2012/08/04', 'co-up basic', 20);
  declaration('martin', '2012/06/04', 'co-up basic', 20);

  transfer('michiel', 'hugo', '2012/07/02', 556, 'EUR');
  transfer('michiel', 'martin', '2012/07/02', 20, 'EUR');
  
  declaration('hugo', '2012/07/31', 'internship July', 500);
  declaration('hugo', '2012/08/31', 'internship August', 500);
  declaration('hugo', '2012/08/31', 'ticket Unhost (declaration against ToS;DR)', 180);
  transfer('michiel', 'hugo', '2012/08/02', 520, 'EUR');
  transfer('michiel', 'hugo', '2012/08/31', 750, 'EUR');
  transfer('michiel', 'hugo', '2012/08/24', 5, 'EUR');//cash at dinner
  reportDonation('final year 2 payment from nlnet', 5000, 'michiel', '2012/08/29');
  reportDonation('from flattr Aug 2012', 74.48, 'michiel', '2012/08/31');
  reportDonation('from paypal Aug 2012', 90.84-74.48, 'michiel', '2012/08/31');

  console.log('************************');
  function itoa(i) {
    var wholes = Math.floor(i);
    var cents = (i - Math.floor(i))*100;
    var dimes = Math.floor(cents/10);
    cents = Math.floor(cents - 10*dimes+0.5);
    //console.log(i+' -> '+wholes+'.'+dimes+cents);
    return ''+wholes+'.'+dimes+cents;
  }
  function roundOff(amount) {
    return Math.floor(100*amount+0.5)/100;
  }
  var balances = remoteStorage.money.getBalances2('EUR');
  var str = '';
  for(var i in balances) {
   str += '<li>'+i+': '+itoa(roundOff(balances[i]))+' EUR</li>';
  };
  var months = {
    'AUG 2012': {
      endBalances: remoteStorage.money.getBalances2('EUR'),
      transactions: [{
        from: 'donations-needed',
        to: 'michiel',
        amount: 100,
        currency: 'EUR',
        description: 'Design OpenTabs T-shirt'
      }]
    }
  };
  function array_keys(obj) {
    var keys=[];
    for(var i in obj) {
      keys.push(i);
    }
    return keys;
  }
  var str = '<table>';
  for(var month in months) {
    str+='<table border="1"><th><td>'+month+'</td><td>'+array_keys(months[month].endBalances).join('</td><td>')+'</td></th>'
    for(var i=0;i<months[month].transactions.length;i++) {
    
    }
    str+='</table>';
  }
  document.getElementById('balances').innerHTML=str;
</script>
